(this.webpackJsonpnewhandoff=this.webpackJsonpnewhandoff||[]).push([[0],{45:function(e,t,a){e.exports=a(65)},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},55:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),i=(a(50),a(51),a(5)),l=a(6),s=a(8),d=a(7),m=a(9),h=(a(52),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.bs>=0?"bs"+this.props.bs:"r"+this.props.row+"c"+this.props.col,t=this.props.visiting?"visiting node-visited":this.props.bs>=0?"bs":this.props.path?"path":"",a=this.props.visiting?"".concat(Math.sign(this.props.power)*Math.round(Math.abs(this.props.power))):"";return r.a.createElement("div",{className:"node ".concat(t),id:e},a)}}]),t}(n.Component)),p=a(14),u=a.n(p),f=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={row:a.props.row,col:a.props.col,basestaion:a.props.bs},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.row,t=this.state.col,a=this.state.basestaion,n=document.getElementById("r".concat(e,"c").concat(t)),r=document.getElementById("bs".concat(a)),o={};null!==n&&null!==r&&(o=w(r,n,"#ffc952",5),this.setState({linestyle:o}))}},{key:"render",value:function(){var e=this.props.row,t=this.props.col,a=this.props.bs,n=this.props.handoff,o=this.state.linestyle,c={},i=document.getElementById("r".concat(e,"c").concat(t)),l=document.getElementById("bs".concat(a));return null!==i&&null!==l&&(o=w(l,i,"#ffc952",5)),c=n&&null!==i?function(e){var t=v(e),a=t.left-.7*t.width;return{padding:"0px",margin:"0px",width:"80px",height:"80px",position:"absolute",top:t.top-90+"px",left:a+"px"}}(i):{display:"none"},r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:c,className:"handoff"}),r.a.createElement("div",{style:o}))}}]),t}(n.Component);function w(e,t,a,n){var r=v(e),o=v(t),c=r.left+.5*r.width,i=r.top+.5*r.height,l=o.left+.5*o.width,s=o.top+.5*o.height,d=Math.sqrt((l-c)*(l-c)+(s-i)*(s-i));return{padding:"0px",margin:"0px",height:n+"px",backgroundColor:a,lineHeight:"1px",position:"absolute",left:(c+l)/2-d/2+"px",top:(i+s)/2-n/2+"px",width:d+"px",transform:"rotate("+Math.atan2(i-s,c-l)*(180/Math.PI)+"deg)",opacity:.5}}function v(e){var t=e.getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:t.width||e.offsetWidth,height:t.height||e.offsetHeight}}a(55);var E=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={row:a.props.row,col:a.props.col,dir:a.props.dir,enter:a.props.enter},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.row,t=this.state.col,a=this.state.dir,n=(this.state.enter,document.getElementById("r".concat(e,"c").concat(t)));if(null!==n){var r=function(e,t,a){var n=function(e){var t=e.getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:t.width||e.offsetWidth,height:t.height||e.offsetHeight}}(e),r=0,o=0,c="";1===t?(r=n.left-85,o=n.top-25,c="arrow".concat(t)):0===t?(r=n.left-25,o=n.top+35,c="arrow".concat(t)):2===t?(r=n.left-25,o=n.top-85,c="arrow".concat(t)):3===t&&(r=n.left+35,o=n.top-25,c="arrow".concat(t));return{style:{padding:"0px",margin:"0px",position:"absolute",top:o+"px",left:r+"px"},arrowimg:c}}(n,a);this.setState({style:r.style,arrowimg:r.arrowimg})}}},{key:"render",value:function(){var e=this.state.style,t=this.state.arrowimg,a=0===this.state.enter?"entering":1===this.state.enter?"leaving":"";return r.a.createElement("div",{style:e,className:"".concat(t," ").concat(a," arrowsize")})}}]),t}(n.Component);var g=a(36),b=a.n(g),y=a(37),N=a.n(y),k=(a(58),b()(N.a)),O=[],j=[],M=[],C=[],x=[],B=[],I=0,P=0,H=0,z=0,S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.type,t=this.props.data,a="",n="",o=[],c=[];return"cars"===e?(a="Cars",O.push(t),C.push(I),I++,o=C,c=O,z=4):"handoffs"===e?(a="Handoffs",j.push(t),x.push(P),P++,o=x,c=j,z=0):"power"===e&&(a="Average Power",n="dBm",t=t.toFixed(2),M.push(t),B.push(H),H++,o=B,c=M,z=-103),r.a.createElement("div",{className:"datacontainer"},r.a.createElement("div",{className:"data"},r.a.createElement("div",{className:"word"},a),r.a.createElement("div",{className:e},"".concat(t," ").concat(n))),r.a.createElement("div",{className:"plotlycontainer"},r.a.createElement(k,{style:{width:"100%",height:"100%"},useResizeHandler:!0,data:[{x:o,y:c,type:"line",marker:{color:"#be3335"}},{type:"line",x:[0],y:[z]}],layout:{autosize:!0,title:a,showlegend:!1,margin:{t:30,r:20,l:45,b:20},useResizeHandler:!0},config:{displayModeBar:!1}})))}}]),t}(n.Component),T=a(68),L=a(69),D=(a(59),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T.a,{bg:"dark",expand:"md",variant:"dark",fixed:"top",className:"navbrand"},r.a.createElement(T.a.Brand,{href:"#home"},r.a.createElement("img",{alt:"",src:"./bs.png",width:"35",height:"35",className:"d-inline-block align-top",id:"logo"})," ","Wireless Network Handoff Visualizer"),r.a.createElement(T.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(T.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(L.a,{className:"ml-auto"},r.a.createElement(L.a.Link,{href:"https://github.com/chonyy/handoff-visualizer/blob/master/README.md",className:"navbarlinks"},"Docs"),r.a.createElement(L.a.Link,{href:"https://github.com/chonyy/handoff-visualizer",className:"navbarlinks"},"Source"),r.a.createElement(L.a.Link,{href:"https://github.com/chonyy",className:"navbarlinks"},"Creator")))))}}]),t}(n.Component)),R=(a(62),a(12)),W=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(R.a,null,r.a.createElement(R.a.Toggle,{size:"lg",variant:"success",id:"dropdown-basic"},"Best Policy"),r.a.createElement(R.a.Menu,null,r.a.createElement(R.a.Item,{onClick:function(){return e.handledrop(0)}},"Best Policy"),r.a.createElement(R.a.Item,{onClick:function(){return e.handledrop(1)}},"Threshold Policy"),r.a.createElement(R.a.Item,{onClick:function(){return e.handledrop(2)}},"Entrophy Policy"),r.a.createElement(R.a.Item,{onClick:function(){return e.handledrop(3)}},"Minimum Policy")))}}]),t}(n.Component),V=(a(64),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"icons-description"},r.a.createElement("div",{className:"icon-row"},r.a.createElement("div",{className:"ms first"},"-103"),r.a.createElement("div",{className:"legend second"},"MS, Car (Power)")),r.a.createElement("div",{className:"icon-row"},r.a.createElement("div",{className:"bs first"}),r.a.createElement("div",{className:"legend second"},"BS, Base station")),r.a.createElement("div",{className:"icon-row"},r.a.createElement("div",{className:"transmission first"}),r.a.createElement("div",{className:"legend second"},"Servicing")),r.a.createElement("div",{className:"icon-row"},r.a.createElement("div",{className:"path first"}),r.a.createElement("div",{className:"legend second"},"MS Path")),r.a.createElement("div",{className:"icon-row"},r.a.createElement("div",{className:"block first"}),r.a.createElement("div",{className:"legend second"},"Block")),r.a.createElement("div",{className:"icon-row"},r.a.createElement("div",{className:"handoff first"}),r.a.createElement("div",{className:"legend second"},"Handoff Made")),r.a.createElement("div",{className:"icon-row"},r.a.createElement("div",{className:"entrancee first"}),r.a.createElement("div",null,r.a.createElement("div",{className:"legend second"},"MS Entrance"))),r.a.createElement("div",{className:"third"},"(Cars can only enter or leave here)"),r.a.createElement("div",{className:"icon-row"},r.a.createElement("div",{className:"enteringg first"}),r.a.createElement("div",{className:"legend second"},"Car Entering")),r.a.createElement("div",{className:"icon-row"},r.a.createElement("div",{className:"leavingg first"}),r.a.createElement("div",{className:"legend second"},"Car leaving")))}}]),t}(n.Component)),A=(n.Component,n.Component,n.Component,a(32)),F=[{row:5,col:7},{row:5,col:21},{row:15,col:7},{row:15,col:21}];function G(e,t,a,n){for(var r=Object(A.a)(t),o=[],c=0,i=0,l=0;l<r.length;l++){var s=r[l];s.row<0||s.row>20||s.col<0||s.col>28?o.push(s):(s.row%5===0&&s.col%7===0&&J(s),X(s),Y(s,a,n),c++,i+=s.power)}return n.averagepower=i/c,function(e,t,a){for(var n=0;n<t.length;n++){var r=t[n].row,o=t[n].col;console.log(r,o),-1===r&&7===o?a[0].carenter=1:-1===r&&21===o?a[1].carenter=1:21===r&&7===o?a[2].carenter=1:21===r&&21===o?a[3].carenter=1:5===r&&29===o?a[4].carenter=1:15===r&&29===o?a[5].carenter=1:5===r&&-1===o?a[6].carenter=1:15===r&&-1===o&&(a[7].carenter=1),e.splice(e.indexOf(t[n]),1)}}(r,o,e),r}function J(e){var t,a,n=e.dir,r=(t=0,a=5,t=Math.ceil(t),a=Math.floor(a),Math.floor(Math.random()*(a-t+1))+t);if(e.row%20===0&&e.col%28===0)0===e.row&&0===e.col?0===n?n=1:3===n&&(n=2):20===e.row&&0===e.col?3===n?n=0:2===n&&(n=1):0===e.row&&28===e.col?1===n?n=2:0===n&&(n=3):20===e.row&&28===e.col&&(2===n?n=3:1===n&&(n=0));else if(0===e.row&&14===e.col||10===e.row&&0===e.col||10===e.row&&28===e.col||20===e.row&&14===e.col){var o=function(e,t,a){var n=[0,1,2,3],r=(e+2)%4;n.splice(n.indexOf(r),1),0===t&&14===a?n.splice(n.indexOf(0),1):10===t&&0===a?n.splice(n.indexOf(3),1):10===t&&28===a?n.splice(n.indexOf(1),1):20===t&&14===a&&n.splice(n.indexOf(2),1);return n}(e.dir,e.row,e.col);n=r<=2?o[0]:o[1]}else 0===r?n--:1!==r&&2!==r||n++;-1===n&&(n=3),n%=4,e.dir=n}function X(e){2===e.dir?e.row++:0===e.dir?e.row--:1===e.dir?e.col++:3===e.dir&&e.col--}function Y(e,t,a){var n=!1,r=q(e.row,e.col,F[e.bs]),o=[];o.push(q(e.row,e.col,F[0])),o.push(q(e.row,e.col,F[1])),o.push(q(e.row,e.col,F[2])),o.push(q(e.row,e.col,F[3]));var c=Math.max.apply(Math,o),i=o.indexOf(c);0===t?c>r&&(e.bs=i,e.power=c,n=!0,console.log("best")):1===t?c>r&&r<-108&&(console.log("new",c),console.log("old",r),e.bs=i,e.power=c,n=!0,console.log("threshold")):2===t?c>r+5&&(e.bs=i,e.power=c,n=!0,console.log("entrophy")):3===t&&r<-112&&(e.bs=i,e.power=c,n=!0,console.log("minimum")),n?(a.handoffs++,e.handoff=!0):(e.power=r,e.handoff=!1)}function q(e,t,a){var n,r=20*Math.abs(t-a.col),o=20*Math.abs(e-a.row),c=Math.pow(Math.pow(r,2)+Math.pow(o,2),.5);return 0===c?-50:-60-20*(n=c,Math.log(n)/Math.log(10))}var $=0,K={handoffs:0,averagepower:-103},Q=0,U=[{row:5,col:7},{row:5,col:21},{row:15,col:7},{row:15,col:21}],Z=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(d.a)(t).call(this))).state={grid:[],cars:[{row:5,col:0,dir:1,bs:0,power:q(5,0,U[0]),handoff:!1},{row:5,col:28,dir:3,bs:1,power:q(5,28,U[1]),handoff:!1},{row:15,col:0,dir:1,bs:2,power:q(15,0,U[2]),handoff:!1},{row:15,col:28,dir:3,bs:3,power:q(15,28,U[3]),handoff:!1}],entrances:[{row:0,col:7,arrowdir:2,carenter:-1},{row:0,col:21,arrowdir:2,carenter:-1},{row:20,col:7,arrowdir:0,carenter:-1},{row:20,col:21,arrowdir:0,carenter:-1},{row:5,col:28,arrowdir:3,carenter:-1},{row:15,col:28,arrowdir:3,carenter:-1},{row:5,col:0,arrowdir:1,carenter:-1},{row:15,col:0,arrowdir:1,carenter:-1}]},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=function(e){for(var t=[],a=0;a<21;a++){for(var n=[],r=0;r<29;r++){for(var o=!1,c=0,i=!1,l=0;l<e.length;l++)if(a===e[l].row&&r===e[l].col){o=!0,c=e[l].power,i=e[l].handoff;break}var s=-1,d=a%5===0||r%7===0;5===a&&7===r?s=0:5===a&&21===r?s=1:15===a&&7===r?s=2:15===a&&21===r&&(s=3),n.push({row:a,col:r,visiting:o,path:d,bs:s,power:c,handoff:i})}t.push(n)}return t}(this.state.cars);this.setState({grid:t});var a=this.state.grid,n=this.state.cars,o=this.state.entrances;return r.a.createElement("div",{className:"maincontent"},r.a.createElement("div",{className:"descontainer"},r.a.createElement("div",{className:"description"},r.a.createElement("div",{className:"goalcontainer"},r.a.createElement("div",{className:"intro goal"},"Goal"),r.a.createElement("div",{className:"intro intropower"},"Least Handoffs"),r.a.createElement("div",{className:"intro introhandoffs"},"Highest Power")),r.a.createElement(W,null),r.a.createElement("div",{className:"button",onClick:function(){return e.handleClick()}},r.a.createElement("div",null,"Visualize")),r.a.createElement(V,null))),r.a.createElement("div",{className:"simcontainer"},r.a.createElement("div",{className:"simulation"},r.a.createElement("div",{className:"board"},a.map((function(e){return r.a.createElement("div",{key:u()(),className:"roww"},e.map((function(e){return r.a.createElement(h,{key:u()(),row:e.row,col:e.col,visiting:e.visiting,path:e.path,bs:e.bs,power:e.power,handoff:e.handoff})})))}))),r.a.createElement("div",null,n.map((function(e){return r.a.createElement(f,{key:u()(),row:e.row,col:e.col,bs:e.bs,handoff:e.handoff})}))),r.a.createElement("div",null,o.map((function(e){var t=-1;return 0===e.carenter?t=0:1===e.carenter&&(t=1),e.carenter=-1,r.a.createElement(E,{key:u()(),row:e.row,col:e.col,dir:e.arrowdir,enter:t})}))))),r.a.createElement("div",{className:"datacontainer"},r.a.createElement("div",{className:"datas"},r.a.createElement(S,{type:"cars",data:n.length}),r.a.createElement(S,{type:"handoffs",data:K.handoffs}),r.a.createElement(S,{type:"power",data:K.averagepower}))))}},{key:"handledrop",value:function(e){0===e?(document.getElementById("dropdown-basic").innerHTML="Best Policy",$=0):1===e?(document.getElementById("dropdown-basic").innerHTML="Threshsold Policy",$=1):2===e?(document.getElementById("dropdown-basic").innerHTML="Entrophy Policy",$=2):3===e&&(document.getElementById("dropdown-basic").innerHTML="Minimum Policy",$=3)}},{key:"handleClick",value:function(){var e=this;1===Q?(Q=0,clearInterval(window.intervalid)):(Q=1,window.intervalid=setInterval((function(){console.log(Q);var t=function(e,t){for(var a=Object(A.a)(e),n=0;n<8;n++){Math.random()<.0163911909&&(0===n?t.push({row:0,col:7,dir:2,bs:0,power:q(0,7,F[0])}):1===n?t.push({row:0,col:21,dir:2,bs:1,power:q(0,21,F[1])}):2===n?t.push({row:20,col:7,dir:0,bs:2,power:q(20,7,F[2])}):3===n?t.push({row:20,col:21,dir:0,bs:3,power:q(20,21,F[3])}):4===n?t.push({row:5,col:28,dir:3,bs:1,power:q(5,28,F[1])}):5===n?t.push({row:15,col:28,dir:3,bs:3,power:q(15,28,F[3])}):6===n?t.push({row:5,col:0,dir:2,bs:0,power:q(5,0,F[0])}):7===n&&t.push({row:15,col:0,dir:2,bs:2,power:q(15,0,F[2])}),a[n].carenter=0)}return a}(e.state.entrances,e.state.cars),a=G(e.state.entrances,e.state.cars,$,K),n=function(e){for(var t=[],a=0;a<21;a++){for(var n=[],r=0;r<29;r++){for(var o=!1,c=0,i=!1,l=0;l<e.length;l++)if(a===e[l].row&&r===e[l].col){o=!0,c=e[l].power,i=e[l].handoff;break}var s=-1,d=a%5===0||r%7===0;5===a&&7===r?s=0:5===a&&21===r?s=1:15===a&&7===r?s=2:15===a&&21===r&&(s=3),n.push({row:a,col:r,visiting:o,path:d,bs:s,power:c,handoff:i})}t.push(n)}return t}(e.state.cars);e.setState({grid:n,cars:a,entrances:t})}),600))}},{key:"render",value:function(){var e=this,t=this.state.grid,a=this.state.cars,n=this.state.entrances;return r.a.createElement("div",null,r.a.createElement(D,null),r.a.createElement("div",{className:"maincontent"},r.a.createElement("div",{className:"descontainer"},r.a.createElement("div",{className:"description"},r.a.createElement("div",{className:"goalcontainer"},r.a.createElement("div",{className:"intro goal"},"Goal"),r.a.createElement("div",{className:"intro intropower"},"Least Handoffs"),r.a.createElement("div",{className:"intro introhandoffs"},"Highest Power")),r.a.createElement(R.a,null,r.a.createElement(R.a.Toggle,{size:"lg",variant:"success",id:"dropdown-basic"},"Best Policy"),r.a.createElement(R.a.Menu,null,r.a.createElement(R.a.Item,{onClick:function(){return e.handledrop(0)}},"Best Policy"),r.a.createElement(R.a.Item,{onClick:function(){return e.handledrop(1)}},"Threshold Policy"),r.a.createElement(R.a.Item,{onClick:function(){return e.handledrop(2)}},"Entrophy Policy"),r.a.createElement(R.a.Item,{onClick:function(){return e.handledrop(3)}},"Minimum Policy"))),r.a.createElement("div",{className:"button",onClick:function(){return e.handleClick()}},r.a.createElement("div",null,"Visualize")),r.a.createElement(V,null))),r.a.createElement("div",{className:"simcontainer"},r.a.createElement("div",{className:"simulation"},r.a.createElement("div",{className:"board"},t.map((function(e){return r.a.createElement("div",{key:u()(),className:"roww"},e.map((function(e){return r.a.createElement(h,{key:u()(),row:e.row,col:e.col,visiting:e.visiting,path:e.path,bs:e.bs,power:e.power,handoff:e.handoff})})))}))),r.a.createElement("div",null,a.map((function(e){return r.a.createElement(f,{key:u()(),row:e.row,col:e.col,bs:e.bs,handoff:e.handoff})}))),r.a.createElement("div",null,n.map((function(e){var t=-1;return 0===e.carenter?t=0:1===e.carenter&&(t=1),e.carenter=-1,r.a.createElement(E,{key:u()(),row:e.row,col:e.col,dir:e.arrowdir,enter:t})}))))),r.a.createElement("div",{className:"datacontainer"},r.a.createElement("div",{className:"datas"},r.a.createElement(S,{type:"cars",data:a.length}),r.a.createElement(S,{type:"handoffs",data:K.handoffs}),r.a.createElement(S,{type:"power",data:K.averagepower})))),r.a.createElement("div",{className:"footer"}))}}]),t}(n.Component);var _=function(){return r.a.createElement(Z,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.68b2bdaf.chunk.js.map